(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{82:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return b})),n.d(t,"default",(function(){return p}));var a=n(3),r=n(7),l=(n(0),n(89)),i={title:"Package configuration"},o={unversionedId:"config",id:"config",isDocsHomePage:!1,title:"Package configuration",description:"To configure a package, add a packemon block to their package.json, with any of the following",source:"@site/docs/config.md",slug:"/config",permalink:"/docs/config",editUrl:"https://github.com/milesj/packemon/edit/master/website/docs/config.md",version:"current",sidebar:"docs",previous:{title:"Setup & requirements",permalink:"/docs/setup"},next:{title:"Build",permalink:"/docs/build"}},b=[{value:"Platforms",id:"platforms",children:[]},{value:"Support",id:"support",children:[{value:"Legend",id:"legend",children:[]}]},{value:"Formats",id:"formats",children:[{value:"Browser",id:"browser",children:[]},{value:"Native",id:"native",children:[]},{value:"Node",id:"node",children:[]}]},{value:"Inputs",id:"inputs",children:[]},{value:"Source maps",id:"source-maps",children:[]},{value:"Namespace",id:"namespace",children:[]}],c={toc:b};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"To configure a package, add a ",Object(l.b)("inlineCode",{parentName:"p"},"packemon")," block to their ",Object(l.b)("inlineCode",{parentName:"p"},"package.json"),", with any of the following\noptional options. We suggest defining a platform at minimum."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "name": "package",\n  "packemon": {\n    "platform": "node"\n  }\n}\n')),Object(l.b)("p",null,"If you would like to support granular combinations of platforms, its formats, and supported\nenvironments, you may pass an array of options to ",Object(l.b)("inlineCode",{parentName:"p"},"packemon"),". This is an advanced feature, so use\nwith caution."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "name": "package",\n  "packemon": [\n    {\n      "inputs": { "index": "src/index.ts" },\n      "platform": "node"\n    },\n    {\n      "inputs": { "web": "src/web.ts" },\n      "platform": "browser",\n      "sourceMaps": true,\n      "support": "current"\n    },\n    {\n      "inputs": { "node": "src/node.mjs" },\n      "format": "mjs",\n      "platform": "node",\n      "support": "experimental"\n    }\n  ]\n}\n')),Object(l.b)("h2",{id:"platforms"},"Platforms"),Object(l.b)("p",null,"The platform in which built code will be ran."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"browser")," ",Object(l.b)("em",{parentName:"li"},"(default)")," - Web browsers on desktop and mobile."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"native")," - Native devices, primarily for React Native."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"node")," - Node.js runtime.")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "platform": "browser"\n}\n')),Object(l.b)("p",null,"To support multiple platforms, pass an array."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "platform": ["browser", "node"]\n}\n')),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"In the future, we hope to support other platforms like Electron and React Native.")),Object(l.b)("h2",{id:"support"},"Support"),Object(l.b)("p",null,"The supported environment and or version for the configured platform(s)."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"legacy")," - An unsupported version. Only exists for legacy projects and systems."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"stable")," ",Object(l.b)("em",{parentName:"li"},"(default)")," - The oldest supported version, typically a version in LTS maintenance mode."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"current")," - The current supported LTS version."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"experimental")," - The newest version, typically not yet released for LTS. Is experimental or\nunstable.")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "support": "current"\n}\n')),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"We suggest leaving this setting at ",Object(l.b)("inlineCode",{parentName:"p"},"stable")," for all libraries, as it offers the widest range of\nsupport for consumers.")),Object(l.b)("h3",{id:"legend"},"Legend"),Object(l.b)("p",null,"The supported environments above map to the following platform targets."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null}),Object(l.b)("th",{parentName:"tr",align:null},"Legacy"),Object(l.b)("th",{parentName:"tr",align:null},"Stable"),Object(l.b)("th",{parentName:"tr",align:null},"Current"),Object(l.b)("th",{parentName:"tr",align:null},"Experimental"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Browser"),Object(l.b)("td",{parentName:"tr",align:null},">= IE 10"),Object(l.b)("td",{parentName:"tr",align:null},">= IE 11"),Object(l.b)("td",{parentName:"tr",align:null},"> 0.5% usage"),Object(l.b)("td",{parentName:"tr",align:null},"last 2 chrome versions")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Native"),Object(l.b)("td",{parentName:"tr",align:null},">= iOS 8"),Object(l.b)("td",{parentName:"tr",align:null},">= iOS 10"),Object(l.b)("td",{parentName:"tr",align:null},">= iOS 12"),Object(l.b)("td",{parentName:"tr",align:null},">= iOS 14")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Node"),Object(l.b)("td",{parentName:"tr",align:null},">= 8.10.0"),Object(l.b)("td",{parentName:"tr",align:null},">= 10.3.0"),Object(l.b)("td",{parentName:"tr",align:null},">= 12.0.0"),Object(l.b)("td",{parentName:"tr",align:null},">= 15.0.0")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"Node (NPM)"),Object(l.b)("td",{parentName:"tr",align:null},">= 5.6.0"),Object(l.b)("td",{parentName:"tr",align:null},">= 6.1.0"),Object(l.b)("td",{parentName:"tr",align:null},">= 6.9.0"),Object(l.b)("td",{parentName:"tr",align:null},">= 7.0.0")))),Object(l.b)("h2",{id:"formats"},"Formats"),Object(l.b)("p",null,"The output format for each platform build target. Each format will create a folder relative to the\nproject root that will house the built files."),Object(l.b)("h3",{id:"browser"},"Browser"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"lib")," ",Object(l.b)("em",{parentName:"li"},"(default)")," - ",Object(l.b)("a",{parentName:"li",href:"https://nodejs.org/api/modules.html"},"CommonJS")," output using ",Object(l.b)("inlineCode",{parentName:"li"},".js")," file\nextension. For standard JavaScript and TypeScript projects."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"esm")," ",Object(l.b)("em",{parentName:"li"},"(default)")," - ECMAScript module output using ",Object(l.b)("inlineCode",{parentName:"li"},".js")," file extension. The same as ",Object(l.b)("inlineCode",{parentName:"li"},"lib"),", but\nuses ",Object(l.b)("inlineCode",{parentName:"li"},"import/export")," instead of ",Object(l.b)("inlineCode",{parentName:"li"},"require"),"."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"umd")," - Universal Module Definition output using ",Object(l.b)("inlineCode",{parentName:"li"},".js")," file extension. Meant to be used directly\nin the browser (via CDN) instead of being bundled. Will be automatically enabled if\n",Object(l.b)("a",{parentName:"li",href:"#namespace"},"namespace")," is provided and using default formats.")),Object(l.b)("h3",{id:"native"},"Native"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"lib")," ",Object(l.b)("em",{parentName:"li"},"(default)")," - ",Object(l.b)("a",{parentName:"li",href:"https://nodejs.org/api/modules.html"},"CommonJS")," output using ",Object(l.b)("inlineCode",{parentName:"li"},".js")," file\nextension. For standard JavaScript and TypeScript projects. ",Object(l.b)("em",{parentName:"li"},"This is the only format supported by\nReact Native and Metro."))),Object(l.b)("h3",{id:"node"},"Node"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"lib")," ",Object(l.b)("em",{parentName:"li"},"(default)")," - ",Object(l.b)("a",{parentName:"li",href:"https://nodejs.org/api/modules.html"},"CommonJS")," output using ",Object(l.b)("inlineCode",{parentName:"li"},".js")," file\nextension. For standard JavaScript and TypeScript projects."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"cjs")," - ",Object(l.b)("a",{parentName:"li",href:"https://nodejs.org/api/modules.html"},"CommonJS")," output using ",Object(l.b)("inlineCode",{parentName:"li"},".cjs")," file extension. Source\nfiles must be written in CommonJS (",Object(l.b)("inlineCode",{parentName:"li"},".cjs"),") and ",Object(l.b)("inlineCode",{parentName:"li"},"require")," paths must use trailing extensions."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"mjs")," - ",Object(l.b)("a",{parentName:"li",href:"https://nodejs.org/api/esm.html"},"ECMAScript module")," output using ",Object(l.b)("inlineCode",{parentName:"li"},".mjs")," file extension.\nSource files must be written in ESM (",Object(l.b)("inlineCode",{parentName:"li"},".mjs"),") and ",Object(l.b)("inlineCode",{parentName:"li"},"import")," paths must use trailing extensions.")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "format": "lib"\n}\n')),Object(l.b)("p",null,"To support multiple formats, or cross-platform formats, pass an array."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "format": ["lib", "cjs", "esm", "umd"]\n}\n')),Object(l.b)("h2",{id:"inputs"},"Inputs"),Object(l.b)("p",null,"A mapping of entry points for the library, where the object key is the name of the output file to be\nbuilt (without extension), and the value is an input source file relative to the package root."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "inputs": {\n    "index": "src/index.ts",\n    "client": "src/client/index.ts",\n    "server": "src/server.ts"\n  }\n}\n')),Object(l.b)("p",null,"Defaults to ",Object(l.b)("inlineCode",{parentName:"p"},'{ "index": "src/index.ts" }')," if not defined. If you're ",Object(l.b)("em",{parentName:"p"},"not")," using TypeScript, you will\nneed to configure this."),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"These inputs can be automatically mapped to ",Object(l.b)("inlineCode",{parentName:"p"},"package.json")," ",Object(l.b)("inlineCode",{parentName:"p"},"exports")," using the ",Object(l.b)("inlineCode",{parentName:"p"},"--addExports")," CLI\noption. Do note that this feature is still experimental.")),Object(l.b)("h2",{id:"source-maps"},"Source maps"),Object(l.b)("p",null,"Enable source map generation for all formats within the current configuration block."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "sourceMaps": true\n}\n')),Object(l.b)("h2",{id:"namespace"},"Namespace"),Object(l.b)("p",null,"For browsers only, this would be the name of the UMD global variable."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "namespace": "Packemon"\n}\n')))}p.isMDXComponent=!0},89:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),p=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,i=e.parentName,c=b(e,["components","mdxType","originalType","parentName"]),s=p(n),m=a,d=s["".concat(i,".").concat(m)]||s[m]||u[m]||l;return n?r.a.createElement(d,o(o({ref:t},c),{},{components:n})):r.a.createElement(d,o({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=m;var o={};for(var b in t)hasOwnProperty.call(t,b)&&(o[b]=t[b]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var c=2;c<l;c++)i[c]=n[c];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);