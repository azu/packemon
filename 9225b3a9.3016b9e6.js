(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{67:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(6),o=(n(0),n(75)),l={title:"Package configuration"},i={unversionedId:"config",id:"config",isDocsHomePage:!1,title:"Package configuration",description:"Packemon has been designed to build and prepare packages for distribution, and as such, supports",source:"@site/docs/config.md",slug:"/config",permalink:"/docs/config",editUrl:"https://github.com/milesj/packemon/edit/master/website/docs/config.md",version:"current",sidebar:"docs",previous:{title:"Setup & requirements",permalink:"/docs/setup"},next:{title:"Building packages",permalink:"/docs/build"}},c=[{value:"Platforms",id:"platforms",children:[]},{value:"Support",id:"support",children:[{value:"Legend",id:"legend",children:[]}]},{value:"Formats",id:"formats",children:[{value:"Node",id:"node",children:[]},{value:"Browser",id:"browser",children:[]}]},{value:"Inputs",id:"inputs",children:[]},{value:"Namespace",id:"namespace",children:[]}],b={rightToc:c};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Packemon has been designed to build and prepare packages for distribution, and as such, supports\nworkspaces (monorepos) or single packages (solorepos). By default, only packages configured for\nPackemon will be built. This allows specific packages to be completely ignored if need be."),Object(o.b)("p",null,"To configure a package, add a ",Object(o.b)("inlineCode",{parentName:"p"},"packemon")," block to their ",Object(o.b)("inlineCode",{parentName:"p"},"package.json"),", with any of the following\noptional options. We suggest defining a platform at minimum."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json",metastring:'title="package.json"',title:'"package.json"'}),'{\n  "name": "package",\n  "packemon": {\n    "platform": "node"\n  }\n}\n')),Object(o.b)("p",null,"If you would like to support granular combinations of platforms, its formats, and supported\nenvironments, you may pass an array of options to ",Object(o.b)("inlineCode",{parentName:"p"},"packemon"),". This is an advanced feature, so use\nwith caution."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json",metastring:'title="package.json"',title:'"package.json"'}),'{\n  "name": "package",\n  "packemon": [\n    {\n      "inputs": { "index": "src/index.ts" },\n      "platform": "node"\n    },\n    {\n      "inputs": { "web": "src/web.ts" },\n      "platform": "browser",\n      "support": "current"\n    },\n    {\n      "inputs": { "node": "src/node.mjs" },\n      "format": "mjs",\n      "platform": "node",\n      "support": "experimental"\n    }\n  ]\n}\n')),Object(o.b)("h2",{id:"platforms"},"Platforms"),Object(o.b)("p",null,"The platform in which built code will be ran."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"node")," - Node.js runtime."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"browser")," ",Object(o.b)("em",{parentName:"li"},"(default)")," - Web browsers on desktop and mobile.")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "platform": "browser"\n}\n')),Object(o.b)("p",null,"To support multiple platforms, pass an array."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "platform": ["browser", "node"]\n}\n')),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"In the future, we hope to support other platforms like Electron and React Native.")),Object(o.b)("h2",{id:"support"},"Support"),Object(o.b)("p",null,"The supported environment and or version for the configured platform(s)."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"legacy")," - An unsupported version. Only exists for legacy projects and systems."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"stable")," ",Object(o.b)("em",{parentName:"li"},"(default)")," - The oldest supported version, typically a version in LTS maintenance mode."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"current")," - The current supported LTS version."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"experimental")," - The newest version, typically not yet released for LTS. Is experimental or\nunstable.")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "support": "current"\n}\n')),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"We suggest leaving this setting at ",Object(o.b)("inlineCode",{parentName:"p"},"stable")," for all libraries, as it offers the widest range of\nsupport for consumers.")),Object(o.b)("h3",{id:"legend"},"Legend"),Object(o.b)("p",null,"The supported environments above map to the following platform targets."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null})),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Legacy"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Stable"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Current"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Experimental"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Node"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),">= 8.10.0"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),">= 10.3.0"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),">= 12.0.0"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),">= 14.13.0")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Browser"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),">= IE 10"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),">= IE 11"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"> 0.5% usage"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"last 2 chrome versions")))),Object(o.b)("h2",{id:"formats"},"Formats"),Object(o.b)("p",null,"The output format for each platform build target. Each format will create a folder relative to the\nproject root that will house the built files."),Object(o.b)("h3",{id:"node"},"Node"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"lib")," ",Object(o.b)("em",{parentName:"li"},"(default)")," - ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://nodejs.org/api/modules.html"}),"CommonJS")," output using ",Object(o.b)("inlineCode",{parentName:"li"},".js")," file\nextension. For standard JavaScript and TypeScript projects."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"cjs")," - ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://nodejs.org/api/modules.html"}),"CommonJS")," output using ",Object(o.b)("inlineCode",{parentName:"li"},".cjs")," file extension. Source\nfiles must be written in CommonJS (",Object(o.b)("inlineCode",{parentName:"li"},".cjs"),") and ",Object(o.b)("inlineCode",{parentName:"li"},"require")," paths must use trailing extensions."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"mjs")," - ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://nodejs.org/api/esm.html"}),"ECMAScript module")," output using ",Object(o.b)("inlineCode",{parentName:"li"},".mjs")," file extension.\nSource files must be written in ESM (",Object(o.b)("inlineCode",{parentName:"li"},".mjs"),") and ",Object(o.b)("inlineCode",{parentName:"li"},"import")," paths must use trailing extensions.")),Object(o.b)("h3",{id:"browser"},"Browser"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"lib")," ",Object(o.b)("em",{parentName:"li"},"(default)")," - CommonJS output using ",Object(o.b)("inlineCode",{parentName:"li"},".js")," file extension. For standard JavaScript and\nTypeScript projects."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"esm")," ",Object(o.b)("em",{parentName:"li"},"(default)")," - ECMAScript module output using ",Object(o.b)("inlineCode",{parentName:"li"},".js")," file extension. The same as ",Object(o.b)("inlineCode",{parentName:"li"},"lib"),", but\nuses ",Object(o.b)("inlineCode",{parentName:"li"},"import/export")," instead of ",Object(o.b)("inlineCode",{parentName:"li"},"require"),"."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"umd")," - Universal Module Definition output using ",Object(o.b)("inlineCode",{parentName:"li"},".js")," file extension. Meant to be used directly\nin the browser (via CDN) instead of being bundled. Will be automatically enabled if\n",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"#namespace"}),"namespace")," is provided and using default formats.")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "format": "lib"\n}\n')),Object(o.b)("p",null,"To support multiple formats, or cross-platform formats, pass an array."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "format": ["lib", "cjs", "esm", "umd"]\n}\n')),Object(o.b)("h2",{id:"inputs"},"Inputs"),Object(o.b)("p",null,"A mapping of entry points for the library, where the object key is the name of the output file to be\nbuilt (without extension), and the value is an input source file relative to the package root."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "inputs": {\n    "index": "src/index.ts",\n    "client": "src/client/index.ts",\n    "server": "src/server.ts"\n  }\n}\n')),Object(o.b)("p",null,"Defaults to ",Object(o.b)("inlineCode",{parentName:"p"},'{ "index": "src/index.ts" }')," if not defined. If you're ",Object(o.b)("em",{parentName:"p"},"not")," using TypeScript, you will\nneed to configure this."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"These inputs can be automatically mapped to ",Object(o.b)("inlineCode",{parentName:"p"},"package.json")," ",Object(o.b)("inlineCode",{parentName:"p"},"exports")," using the ",Object(o.b)("inlineCode",{parentName:"p"},"--addExports")," CLI\noption. Do note that this feature is still experimental.")),Object(o.b)("h2",{id:"namespace"},"Namespace"),Object(o.b)("p",null,"For browsers only, this would be the name of the UMD global variable."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "namespace": "Packemon"\n}\n')))}p.isMDXComponent=!0},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b=r.a.createContext({}),p=function(e){var t=r.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return r.a.createElement(b.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),s=p(n),m=a,d=s["".concat(l,".").concat(m)]||s[m]||u[m]||o;return n?r.a.createElement(d,i(i({ref:t},b),{},{components:n})):r.a.createElement(d,i({ref:t},b))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var b=2;b<o;b++)l[b]=n[b];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);